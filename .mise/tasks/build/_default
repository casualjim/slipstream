#!/usr/bin/env bash

set -eu -o pipefail

#MISE description="Build Slipstream"

echo "ðŸš€ Starting Slipstream build..."
proj_dir=$(git rev-parse --show-toplevel)
cd "$proj_dir" || exit 1

cargo build --release --workspace
for worker in workers/*; do
  echo "ðŸš€ Building worker: $worker..."
  cd "${proj_dir}/${worker}"
  bun run typecheck
done
echo "âœ… Slipstream build complete!"
